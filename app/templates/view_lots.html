<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Parking lots</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .bubble-text {
        font-family: "Bubblegum Sans", cursive;
        font-size: 2rem;
        color: #2e0532;
        white-space: nowrap;
        overflow: hidden;
        border-right: 3px solid #310534; /* Cursor effect */
        width: 0;
        animation: typing 1.5s steps(20, end) forwards,
          blink 0.75s step-end infinite;
      }

      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 16ch;
        } /* Adjust for text length */
      }

      @keyframes blink {
        50% {
          border-color: transparent;
        }
      }
    </style>
  </head>
  <body class="bg-light d-flex flex-column min-vh-100">
    <header>
      <div
        class="container-fluid d-flex align-items-center pt-4 ps-4 pb-4"
        style="background-color: var(--bs-gray-200)"
      >
        <img
          src="{{ url_for('static', filename='logo.png') }}"
          class="img-fluid"
          alt="App Logo"
          style="max-width: 100px; border-radius: 50%"
        />
        <div class="ps-2 pt-2">
          <h2
            style="
              color: rgba(23, 1, 21, 0.826);
              font-family: 'Poppins', sans-serif;
              font-style: italic;
            "
          >
            ParkPal
          </h2>
        </div>
        <div class="ms-auto">
          <a
            href="{{ url_for('admin.dashboard') }}"
            class="btn btn-light me-2 border-dark"
            >Dashboard
          </a>
          <a href="{{ url_for('authentication.logout') }}" class="btn btn-dark"
            >Logout</a
          >
        </div>
      </div>
    </header>
    <main class="flex-grow-1 mt-5">
      <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div
          class="alert alert-{{ category }} alert-dismissible fade show mt-3"
          role="alert"
        >
          {{ message }}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endfor %} {% endif %} {% endwith %}</div>

        <h1 class="bubble-text ps-4">All the Parking lots</h1>
        <div class="mt-2">
          {% if lots %}
          <table class="table table-bordered table-striped">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Location Name</th>
                <th>Address</th>
                <th>PIN</th>
                <th>Price/hr</th>
                <th>Max Spots</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for lot in lots %}
              <tr>
                <td>{{ lot.id }}</td>
                <td>{{ lot.location_name }}</td>
                <td>{{ lot.address }}</td>
                <td>{{ lot.pin_code }}</td>
                <td>â‚¹{{ lot.price_per_hour }}</td>
                <td>{{ lot.max_spots }}</td>
                <td>
                  <a
                    href="{{ url_for('admin.edit_lot', lot_id=lot.id) }}"
                    class="btn btn-sm btn-light border-dark"
                    >Edit</a
                  >
                  <form
                    action="{{ url_for('admin.delete_lot', lot_id=lot.id) }}"
                    method="POST"
                    style="display: inline"
                  >
                    <button
                      type="submit"
                      class="btn btn-sm btn-dark"
                      onclick="return confirm('Are you sure you want to delete this?')"
                    >
                      Delete
                    </button>
                  </form>
                  <a
                    href="{{ url_for('admin.view_spots', lot_id=lot.id) }}"
                    class="btn btn-sm btn-light border-dark"
                    >Spots</a
                  >
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          {% else %}
          <p class="text-center">No parking lots available.</p>
          {% endif %}
        </div>
      </div>
    </main>

    <footer class="py-4" style="background-color: rgba(23, 1, 21, 0.533)" ;>
      <div
        class="container d-flex justify-content-between align-items-center flex-wrap"
      >
        <div>
          <p class="mb-1">Mail us here:</p>
          <a
            href="mailto:parkpal@mail.com"
            class="text-muted text-decoration-none"
          >
            parkpal@mail.com
          </a>
        </div>
        <div class="text-end">
          <p class="mb-0 text-muted">&copy; 2025 All rights reserved.</p>
        </div>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
